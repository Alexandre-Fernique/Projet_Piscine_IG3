<!--Page de connexion-->
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Connexion</title>
    <link rel="icon" href="images/logo.png"/>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> <!--Importer les icônes-->
    <link rel="stylesheet" href="stylesheets/connexion.css">
</head>
<body class="text-center">
    <form class="form-signin" method="get" action="/connexion">
        <img class="mb-4" src="images/IG.png" alt="" width="50%" height="50%">

        <h1 class="h3 mb-3 font-weight-normal">
            On se connait ?
        </h1>
        <label for="inputEmail" class="sr-only">
            Mail
        </label>
        <input type="email" id="inputEmail" name="Email" class="form-control mb-3 " placeholder="Adresse mail" required autofocus>

        <label for="inputPassword" class="sr-only">
            Mot de passe
        </label>
        <input type="password" id="inputPassword" name="mdp" class="form-control mb-3 " placeholder="Mot de passe" required>

        <span id="alerteMAJ" class = "link-danger">
            <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
            Touche majuscule activée
        </span>

        <div class="checkbox mb-3">
            <label>
                <input type="checkbox" name = "remember" value="ok"> Se souvenir de moi
            </label>
        </div>
        <div class="checkbox mb-3">
            <p>Pas encore inscrit ? <a href="/inscrit">Cliquez ici</a></p>
        </div>
        <button class="btn btn-lg btn-primary btn-block" type="submit">
            Valider
        </button>
        <p class="mt-5 mb-3 text-muted">Groupe 1 - Polytech Montpellier</p>
    </form>


    <script type = "text/javascript">
        //Permet d'afficher un message à l'utilisateur lorsque qu'il active la majuscule et qu'il saisit son mot de passe
        let capsMessage = document.getElementById('alerteMAJ');
        capsMessage.style.display = 'none';
        document.getElementById("inputPassword").addEventListener('keyup', event => {
            if (event.getModifierState('CapsLock')) {
                capsMessage.style.display = 'inherit';
            } else {
                capsMessage.style.display = 'none';
            }
        });


        let params = window.location.search.split('?')[1];
        let el = document.getElementById("inputEmail");
        if (params && params.includes("er=mail")) { // Si on voit une erreur d'adresse mail
            console.log('Erreur de mail détecté');
            el.classList.add("error"); //On ajoute la classe error, qui ajoute du rouge
            el.placeholder = "Mauvaise adresse mail"; //On modifie le texte affiché
            setTimeout(
                () => {
                el.placeholder = "Adresse mail";
            }, 3000)
        }
    </script>
</body>
</html>